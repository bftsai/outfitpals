import{c as n,a as r,l as d}from"./main-92122264.js";const u=document.querySelector(".addTitle"),i=document.querySelector(".addBody"),m=document.querySelector(".addOutfitStyle"),g=document.querySelector(".addBrands"),p=document.querySelector(".createPost"),f=document.querySelector(".userAvatar"),s=document.querySelector(".userName");console.log(s);const l=y("outfitpalsId");function y(e){const o=`; ${document.cookie}`.split(`; ${e}=`);if(o.length===2)return o.pop().split(";").shift()}function v(){n.get(`${r}users?id=${l}`).then(e=>{let t=e.data[0].image,o=e.data[0]["nick name"];S(t,o)}).catch(e=>console.log(e.response))}function S(e,t){f.innerHTML=`<img src="${e}" alt="userAvatar">`,s.textContent=t}v();const h=document.getElementById("upLoadImg");let a=document.querySelector(".upLoadPhoto");h.addEventListener("change",e=>{let t=new FileReader;t.addEventListener("load",o=>{a.setAttribute("src",o.target.result),console.log(a.getAttribute("src"))}),t.readAsDataURL(e.target.files[0])});p.addEventListener("click",function(e){let t={title:u.value,body:i.value,imgUrl:a.getAttribute("src"),userId:l,postTime:new Date().toUTCString(),likeCounts:0,favoriteCounts:0,outfitStyle:m.value,brands:g.value};I(t)});function I(e){n.post(`${r}posts`,e).then(t=>{console.log("建立貼文成功"),console.log(t.data);let c=t.data.id;location.href=`${d}information.html?postId=${c}`}).catch(t=>{console.log(t.response)})}
